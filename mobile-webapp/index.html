  <!doctype html>
<html class="no-js" lang="">

<head>
  <meta charset="utf-8">
  <title></title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">


  <meta property="og:title" content="2022 Noor Lane Lights Show">
  <meta property="og:image" content="https://noorlanelights.show/title-card.png?1">
  <meta property="og:url" content="https://noorlanelights.show/">
  <meta property="og:description" content="Start the animated music and lights show, on-demand!">

  <link rel="manifest" href="public/site.webmanifest">
  <link rel="apple-touch-icon" href="public/icon.png">
  <!-- Place favicon.ico in the root directory -->

  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/button.css">


  <meta name="theme-color" content="#fafafa">
</head>

<body>

  <div class="container">
    <div class="popup">
      <div class="popup-content" style="display: block;">
        <h2 class="popup-title" >Welcome to the 2022 Noor Lane Light Show!</h2>

        <p class="popup-body" id="messageArea">Turn your radio to <b>104.5FM</b></p>

        <div class="popup-body" style="margin-top: -7em;">
          <a class="btn" href="#" onclick="return submit()">
            <div id="label">Loading...
            </div>
          </a>
        </div>
        <div class="video-embed">
          <iframe width="auto" height="auto" src="https://www.youtube.com/embed/gz3W89PWipQ" title="2022 Noor Lane Lights Show - Trans Siberian Orchestra - Carol of the Bells" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
        <div class="cookie-policy">
          Our site doesn't use cookies (we saved them for Santa)
        </div>
      </div>
    </div>
  </div>



  <script>
    var ready = false;
    var isStarting = false;
    const api_host = "https://noorlanelights.show"
    function checkStatus() {
      var xmlhttp = new XMLHttpRequest();
      var url = api_host + "/api/status";

      if (isStarting == true) {
        document.getElementById("label").innerHTML = "Show Starting, please wait...";
      }

      xmlhttp.onreadystatechange = function() {
          if (this.readyState == 4 && this.status == 200) {
              var myArr = JSON.parse(this.responseText);

              if (myArr.status == "ready" && !isStarting) {
                ready = true;
                document.getElementById("label").innerHTML = "Start the show";
                document.getElementById("messageArea").innerHTML = "Turn your radio to <b>104.5FM";

              } else if (myArr.status == "ready" && isStarting) {
                document.getElementById("label").innerHTML = "Show Starting, please wait...";

              } else if (myArr.status == "off") {
                ready = false;
                document.getElementById("messageArea").innerHTML = "Showtime is 5-11pm. Check back soon!";
                document.getElementById("label").innerHTML = "Next Show Starts in: " + myArr.time_remaining;

              } else {
                ready = false;
                isStarting = false;
                document.getElementById("label").innerHTML = "Time remaining: " + myArr.time_remaining;
              }
          }
      };
      xmlhttp.open("GET", url, true);
      xmlhttp.send();
    }

    function submit() {
      if (ready) {
        ready = false;
        isStarting = true;
        document.getElementById("label").innerHTML = "Show Starting, please wait...";
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
        };
        xhttp.open("GET", api_host + "/api/start_show", true);
        xhttp.send();
      }
    }

    function ping() {
        ready = false;
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
        };
        xhttp.open("GET", api_host + "/api/hit", true);
        xhttp.send();
    }
    ping();
    setInterval(function(){ checkStatus(); }, 1000);


  </script>

  <script src="js/vendor/modernizr-3.11.2.min.js"></script>
  <script src="js/plugins.js"></script>
  <script src="js/main.js"></script>

</body>

</html>
